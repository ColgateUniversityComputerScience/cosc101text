
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>5. Functions in depth &#8212; Solving Problems with Python (version 07.2015)</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="6. Program design" href="programdesign.html" />
    <link rel="prev" title="4. Making decisions" href="conditionals.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="programdesign.html" title="6. Program design"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="conditionals.html" title="4. Making decisions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Solving Problems with Python (version 07.2015)</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5. Functions in depth</a><ul>
<li><a class="reference internal" href="#adding-new-functions">5.1. Adding new functions</a></li>
<li><a class="reference internal" href="#definitions-and-uses">5.2. Definitions and uses</a></li>
<li><a class="reference internal" href="#flow-of-execution">5.3. Flow of execution</a></li>
<li><a class="reference internal" href="#parameters-and-arguments">5.4. Parameters and arguments</a></li>
<li><a class="reference internal" href="#variables-and-parameters-are-local">5.5. Variables and parameters are local</a></li>
<li><a class="reference internal" href="#return-values">5.6. Return values</a><ul>
<li><a class="reference internal" href="#the-special-type-none">5.6.1. The special type <code class="docutils literal notranslate"><span class="pre">None</span></code></a></li>
<li><a class="reference internal" href="#functions-with-return-values">5.6.2. Functions with return values</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stack-diagrams">5.7. Stack diagrams</a></li>
<li><a class="reference internal" href="#boolean-functions">5.8. Boolean functions</a></li>
<li><a class="reference internal" href="#debugging">5.9. Debugging</a><ul>
<li><a class="reference internal" href="#adding-print-statements">5.9.1. Adding <code class="docutils literal notranslate"><span class="pre">print</span></code> statements</a></li>
<li><a class="reference internal" href="#unit-testing-and-assert">5.9.2. Unit testing and <code class="docutils literal notranslate"><span class="pre">assert</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#glossary">5.10. Glossary</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="conditionals.html"
                        title="previous chapter">4. Making decisions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="programdesign.html"
                        title="next chapter">6. Program design</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/functionsindepth.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="functions-in-depth">
<h1>5. Functions in depth<a class="headerlink" href="#functions-in-depth" title="Permalink to this headline">¶</a></h1>
<div class="section" id="adding-new-functions">
<h2>5.1. Adding new functions<a class="headerlink" href="#adding-new-functions" title="Permalink to this headline">¶</a></h2>
<p>So far, we have only been <em>using</em> the functions that come with Python,
but it is also possible to add new functions. A <strong>function definition</strong>
specifies the name of a new function and the sequence of statements to
execute when the function is called.</p>
<p>Here is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_lyrics</span><span class="p">():</span>
    <span class="k">print</span> <span class="s2">&quot;I&#39;m a lumberjack, and I&#39;m okay.&quot;</span>
    <span class="k">print</span> <span class="s2">&quot;I sleep all night and I work all day.&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">def</span></code> is a keyword that indicates that this is a function definition.
The name of the function is <code class="docutils literal notranslate"><span class="pre">print_lyrics</span></code>. The rules for function
names are the same as for variable names: letters, numbers and some
punctuation marks are legal, but the first character can’t be a number.
You can’t use a keyword as the name of a function, and you should avoid
having a variable and a function with the same name.</p>
<p>The empty parentheses after the name indicate that this function doesn’t
take any arguments.</p>
<p>The first line of the function definition is called the <strong>header</strong>; the
rest is called the <strong>body</strong>. The header has to end with a colon and the
body has to be indented. By convention, the indentation is always four
spaces. The body can contain any number of statements. We've now seen
three <em>compound statements</em> that can include indented statement blocks:
the <code class="docutils literal notranslate"><span class="pre">for</span></code> statement, the <code class="docutils literal notranslate"><span class="pre">if</span></code> statement, and now the <code class="docutils literal notranslate"><span class="pre">def</span></code>
statement.</p>
<p>If you type a function definition in interactive mode, the interpreter
prints ellipses (<em>...</em>) to let you know that the definition isn’t
complete:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">print_lyrics</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s2">&quot;I&#39;m a lumberjack, and I&#39;m okay.&quot;</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s2">&quot;I sleep all night and I work all day.&quot;</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>To end the function, you have to enter an empty line (this is not
necessary in a script).</p>
<p>Defining a function creates a variable with the same name.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">print_lyrics</span>
<span class="go">&lt;function print_lyrics at 0xb7e99e9c&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="n">print_lyrics</span><span class="p">)</span>
<span class="go">&lt;type &#39;function&#39;&gt;</span>
</pre></div>
</div>
<p>The value of <code class="docutils literal notranslate"><span class="pre">print_lyrics</span></code> is a <strong>function object</strong>, which has type
<code class="docutils literal notranslate"><span class="pre">'function'</span></code>. The output from the <code class="docutils literal notranslate"><span class="pre">print</span> <span class="pre">print_lyrics</span></code> statement
shows a number in hexadecimal format (the number starting <code class="docutils literal notranslate"><span class="pre">&quot;0x...&quot;</span></code>).
The number refers to the <em>memory location</em> of the function object (i.e.,
where that function exists in Python's memory space).</p>
<p>The syntax for calling the new function is the same as for built-in
functions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_lyrics</span><span class="p">()</span>
<span class="go">I&#39;m a lumberjack, and I&#39;m okay.</span>
<span class="go">I sleep all night and I work all day.</span>
</pre></div>
</div>
<p>Once you have defined a function, you can use it inside another
function. For example, to repeat the previous refrain, we could write a
function called <code class="docutils literal notranslate"><span class="pre">repeat_lyrics</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">repeat_lyrics</span><span class="p">():</span>
    <span class="n">print_lyrics</span><span class="p">()</span>
    <span class="n">print_lyrics</span><span class="p">()</span>
</pre></div>
</div>
<p>And then call <code class="docutils literal notranslate"><span class="pre">repeat_lyrics</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">repeat_lyrics</span><span class="p">()</span>
<span class="go">I&#39;m a lumberjack, and I&#39;m okay.</span>
<span class="go">I sleep all night and I work all day.</span>
<span class="go">I&#39;m a lumberjack, and I&#39;m okay.</span>
<span class="go">I sleep all night and I work all day.</span>
</pre></div>
</div>
<p>But that’s not really how the song goes.</p>
</div>
<div class="section" id="definitions-and-uses">
<h2>5.2. Definitions and uses<a class="headerlink" href="#definitions-and-uses" title="Permalink to this headline">¶</a></h2>
<p>Pulling together the code fragments from the previous section, the whole
program looks like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_lyrics</span><span class="p">():</span>
    <span class="k">print</span> <span class="s2">&quot;I&#39;m a lumberjack, and I&#39;m okay.&quot;</span>
    <span class="k">print</span> <span class="s2">&quot;I sleep all night and I work all day.&quot;</span>

<span class="k">def</span> <span class="nf">repeat_lyrics</span><span class="p">():</span>
    <span class="n">print_lyrics</span><span class="p">()</span>
    <span class="n">print_lyrics</span><span class="p">()</span>

<span class="n">repeat_lyrics</span><span class="p">()</span>
</pre></div>
</div>
<p>This program contains two function definitions: <code class="docutils literal notranslate"><span class="pre">print_lyrics</span></code> and
<code class="docutils literal notranslate"><span class="pre">repeat_lyrics</span></code>. Function definitions get executed just like other
statements, but the effect is to create function objects. The statements
inside the function do not get executed until the function is called,
and the function definition generates no output.</p>
<p>As you might expect, you have to create a function before you can
execute it. In other words, the function definition has to be executed
before the first time it is called.</p>
<blockquote>
<div><p><strong>Examples</strong>:</p>
<ol class="arabic simple">
<li>Move the last line of this program to the top, so the function
call appears before the definitions. Run the program and see what
error message you get.</li>
<li>Move the function call back to the bottom and move the definition
of <code class="docutils literal notranslate"><span class="pre">print_lyrics</span></code> after the definition of <code class="docutils literal notranslate"><span class="pre">repeat_lyrics</span></code>.
What happens when you run this program? Why?</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="flow-of-execution">
<h2>5.3. Flow of execution<a class="headerlink" href="#flow-of-execution" title="Permalink to this headline">¶</a></h2>
<p>In order to ensure that a function is defined before its first use, you
have to know the order in which statements are executed, which is called
the <strong>flow of execution</strong>.</p>
<p>Execution always begins at the first statement of the program.
Statements are executed one at a time, in order from top to bottom.</p>
<p>Function definitions do not alter the flow of execution of the program,
but remember that statements inside the function are not executed until
the function is called.</p>
<p>A function call is like a detour in the flow of execution. Instead of
going to the next statement, the flow jumps to the body of the function,
executes all the statements there, and then comes back to pick up
exactly where it left off.</p>
<p>That sounds simple enough, until you remember that one function can call
another. While in the middle of one function, the program might have to
execute the statements in another function. But while executing that new
function, the program might have to execute yet another function!</p>
<p>Fortunately, Python is good at keeping track of where it is, so each
time a function completes, the program picks up where it left off in the
function that called it. When it gets to the end of the program, it
terminates.</p>
<p>What’s the moral of this sordid tale? When you read a program, you don’t
always want to read from top to bottom. Usually, you want to follow the
flow of execution and read the program as Python would interpret it.</p>
</div>
<div class="section" id="parameters-and-arguments">
<h2>5.4. Parameters and arguments<a class="headerlink" href="#parameters-and-arguments" title="Permalink to this headline">¶</a></h2>
<p>Some of the built-in functions we have seen require arguments. For
example, when you call <code class="docutils literal notranslate"><span class="pre">math.sin</span></code> you pass a number as an argument.
Some functions take more than one argument: <code class="docutils literal notranslate"><span class="pre">math.pow</span></code> takes two, the
base and the exponent.</p>
<p>Inside the function, the arguments are assigned to variables called
<strong>parameters</strong>. Here is an example of a user-defined function that takes
an argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_twice</span><span class="p">(</span><span class="n">bruce</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">bruce</span>
    <span class="k">print</span> <span class="n">bruce</span>
</pre></div>
</div>
<p>This function assigns the argument to a parameter named <code class="docutils literal notranslate"><span class="pre">bruce</span></code>. When
the function is called, it prints the value of the parameter (whatever
it is) twice.</p>
<p>This function works with any value that can be printed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_twice</span><span class="p">(</span><span class="s1">&#39;Spam&#39;</span><span class="p">)</span>
<span class="go">Spam</span>
<span class="go">Spam</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_twice</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
<span class="go">17</span>
<span class="go">17</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_twice</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="go">3.14159265359</span>
<span class="go">3.14159265359</span>
</pre></div>
</div>
<p>The same rules of composition that apply to built-in functions also
apply to user-defined functions, so we can use any kind of expression as
an argument for <code class="docutils literal notranslate"><span class="pre">print_twice</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_twice</span><span class="p">(</span><span class="s1">&#39;Spam &#39;</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">Spam Spam Spam Spam</span>
<span class="go">Spam Spam Spam Spam</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_twice</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span>
<span class="go">-1.0</span>
<span class="go">-1.0</span>
</pre></div>
</div>
<p>The argument is evaluated before the function is called, so in the
examples the expressions <code class="docutils literal notranslate"><span class="pre">'Spam</span> <span class="pre">'*4</span></code> and <code class="docutils literal notranslate"><span class="pre">math.cos(math.pi)</span></code> are
only evaluated once.</p>
<p>You can also use a variable as an argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">michael</span> <span class="o">=</span> <span class="s1">&#39;Eric, the half a bee.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_twice</span><span class="p">(</span><span class="n">michael</span><span class="p">)</span>
<span class="go">Eric, the half a bee.</span>
<span class="go">Eric, the half a bee.</span>
</pre></div>
</div>
<p>The name of the variable we pass as an argument (<code class="docutils literal notranslate"><span class="pre">michael</span></code>) has
nothing to do with the name of the parameter (<code class="docutils literal notranslate"><span class="pre">bruce</span></code>). It doesn’t
matter what the value was called back home (in the caller); here in
<code class="docutils literal notranslate"><span class="pre">print_twice</span></code>, we call it <code class="docutils literal notranslate"><span class="pre">bruce</span></code>.</p>
</div>
<div class="section" id="variables-and-parameters-are-local">
<h2>5.5. Variables and parameters are local<a class="headerlink" href="#variables-and-parameters-are-local" title="Permalink to this headline">¶</a></h2>
<p>When you create a variable inside a function, it is <strong>local</strong>, which
means that it only exists inside the function. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cat_twice</span><span class="p">(</span><span class="n">part1</span><span class="p">,</span> <span class="n">part2</span><span class="p">):</span>
    <span class="n">cat</span> <span class="o">=</span> <span class="n">part1</span> <span class="o">+</span> <span class="n">part2</span>
    <span class="n">print_twice</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
</pre></div>
</div>
<p>This function takes two arguments, concatenates them, and prints the
result twice. Here is an example that uses it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">line1</span> <span class="o">=</span> <span class="s1">&#39;Bing tiddle &#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line2</span> <span class="o">=</span> <span class="s1">&#39;tiddle bang.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat_twice</span><span class="p">(</span><span class="n">line1</span><span class="p">,</span> <span class="n">line2</span><span class="p">)</span>
<span class="go">Bing tiddle tiddle bang.</span>
<span class="go">Bing tiddle tiddle bang.</span>
</pre></div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">cat_twice</span></code> terminates, the variable <code class="docutils literal notranslate"><span class="pre">cat</span></code> is destroyed. If we
try to print it, we get an exception:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">cat</span>
<span class="go">NameError: name &#39;cat&#39; is not defined</span>
</pre></div>
</div>
<p>Parameters are also local. For example, outside <code class="docutils literal notranslate"><span class="pre">print_twice</span></code>, there
is no such thing as <code class="docutils literal notranslate"><span class="pre">bruce</span></code>.</p>
</div>
<div class="section" id="return-values">
<h2>5.6. Return values<a class="headerlink" href="#return-values" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-special-type-none">
<h3>5.6.1. The special type <code class="docutils literal notranslate"><span class="pre">None</span></code><a class="headerlink" href="#the-special-type-none" title="Permalink to this headline">¶</a></h3>
<p>Some of the built-in functions we have used, such as the math functions,
produce results. When you call a function that returns a result, like
<code class="docutils literal notranslate"><span class="pre">math.sqrt</span></code>, you almost always want to do something with the result;
for example, you might assign it to a variable or use it as part of an
expression:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">radians</span><span class="p">)</span>
<span class="n">golden</span> <span class="o">=</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</pre></div>
</div>
<p>When you call a function in interactive mode, Python displays the
result:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">2.2360679774997898</span>
</pre></div>
</div>
<p>But in a script, if you call a function that returns a result all by
itself, the return value is lost forever, and does not even show up in
the console as output!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>This script computes the square root of 5, but since it doesn’t store or
display the result (i.e., there is no <code class="docutils literal notranslate"><span class="pre">print</span></code> statement), it is not
very useful.</p>
<p>Functions that do not return anything (also called &quot;void functions&quot;)
might display something on the screen or have some other effect, but
they don’t explicitly pass back a result. However, Python will
implicitly return the special value <code class="docutils literal notranslate"><span class="pre">None</span></code>. Say <code class="docutils literal notranslate"><span class="pre">print_twice</span></code> is
defined as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_twice</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">s</span>
    <span class="k">print</span> <span class="n">s</span>
    <span class="c1"># nothing returned from this function</span>
</pre></div>
</div>
<p>In the interactive interpreter, we call the function and assign its
result to the variable <code class="docutils literal notranslate"><span class="pre">result</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">print_twice</span><span class="p">(</span><span class="s1">&#39;Bing&#39;</span><span class="p">)</span>
<span class="go">Bing</span>
<span class="go">Bing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">result</span>
<span class="go">None</span>
</pre></div>
</div>
<p>The value <code class="docutils literal notranslate"><span class="pre">None</span></code> is not the same as the string <code class="docutils literal notranslate"><span class="pre">'None'</span></code>. It is a
special value that has its own type:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="go">&lt;type &#39;NoneType&#39;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="functions-with-return-values">
<h3>5.6.2. Functions with return values<a class="headerlink" href="#functions-with-return-values" title="Permalink to this headline">¶</a></h3>
<p>If we want a function to hand back a result to the caller of the
function, we can use the <code class="docutils literal notranslate"><span class="pre">return</span></code> statement with an expression. For
example, the following function <code class="docutils literal notranslate"><span class="pre">area</span></code> returns the area of a circle
with a given radius:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>

<span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="n">radius</span><span class="p">):</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">radius</span><span class="o">**</span><span class="mi">2</span>
    <span class="k">return</span> <span class="n">temp</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">return</span></code> statement means: <em>&quot;Return immediately from this function
and use the following expression as a return value.&quot;</em> The expression can
be arbitrarily complicated, so we could have written this function more
concisely:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="n">radius</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">radius</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</div>
<p>On the other hand, <strong>temporary variables</strong> like <code class="docutils literal notranslate"><span class="pre">temp</span></code> often make
debugging easier.</p>
<p>Sometimes it is useful to have multiple return statements, one in each
branch of a conditional:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">absolute_value</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="n">x</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
<p>Since these <code class="docutils literal notranslate"><span class="pre">return</span></code> statements are in an alternative conditional,
only one will be executed.</p>
<p>As soon as a return statement executes, the function terminates without
executing any subsequent statements. Code that appears after a
<code class="docutils literal notranslate"><span class="pre">return</span></code> statement, or any other place the flow of execution can never
reach, is called <strong>dead code</strong>.</p>
<p>In a function that returns a result, it is a good idea to ensure that
every possible path through the program hits a <code class="docutils literal notranslate"><span class="pre">return</span></code> statement. For
example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># warning: this is problematic code!</span>
<span class="k">def</span> <span class="nf">absolute_value</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="n">x</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
<p>This function is incorrect because if <code class="docutils literal notranslate"><span class="pre">x</span></code> happens to be 0, neither
condition is true, and the function ends without hitting a <code class="docutils literal notranslate"><span class="pre">return</span></code>
statement. If the flow of execution gets to the end of a function, the
return value is <code class="docutils literal notranslate"><span class="pre">None</span></code>, which is not the absolute value of 0.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">absolute_value</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">None</span>
</pre></div>
</div>
<p>By the way, Python provides a built-in function called <code class="docutils literal notranslate"><span class="pre">abs</span></code> that
computes absolute values.</p>
<blockquote>
<div><p><strong>Example</strong>:</p>
<ol class="arabic simple">
<li>Write a <code class="docutils literal notranslate"><span class="pre">compare</span></code> function that returns <code class="docutils literal notranslate"><span class="pre">1</span></code> if <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&gt;</span> <span class="pre">y</span></code>,
<code class="docutils literal notranslate"><span class="pre">0</span></code> if <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">y</span></code>, and <code class="docutils literal notranslate"><span class="pre">-1</span></code> if <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">y</span></code>.</li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="stack-diagrams">
<h2>5.7. Stack diagrams<a class="headerlink" href="#stack-diagrams" title="Permalink to this headline">¶</a></h2>
<p>To keep track of which variables can be used where, it is sometimes
useful to draw a <strong>stack diagram</strong>. Like state diagrams, stack diagrams
show the value of each variable, but they also show the function each
variable belongs to.</p>
<p>Each function is represented by a <strong>frame</strong> (or &quot;stack frame&quot;). A frame
is a box with the name of a function beside it and the parameters and
variables of the function inside it. The stack diagram for the previous
example looks like this:</p>
<div class="figure align-center">
<img alt="Example stack diagram." src="_images/stack.png" />
</div>
<p>The frames are arranged in a stack that indicates which function called
which, and so on. In this example, <code class="docutils literal notranslate"><span class="pre">print_twice</span></code> was called by
<code class="docutils literal notranslate"><span class="pre">cat_twice</span></code>, and <code class="docutils literal notranslate"><span class="pre">cat_twice</span></code> was called by <code class="docutils literal notranslate"><span class="pre">__main__</span></code>, which is a
special name for the topmost frame. When you create a variable outside
of any function, it belongs to <code class="docutils literal notranslate"><span class="pre">__main__</span></code>.</p>
<p>Each parameter refers to the same value as its corresponding argument.
So, <code class="docutils literal notranslate"><span class="pre">part1</span></code> has the same value as <code class="docutils literal notranslate"><span class="pre">line1</span></code>, <code class="docutils literal notranslate"><span class="pre">part2</span></code> has the same
value as <code class="docutils literal notranslate"><span class="pre">line2</span></code>, and <code class="docutils literal notranslate"><span class="pre">bruce</span></code> has the same value as <code class="docutils literal notranslate"><span class="pre">cat</span></code>.</p>
<p>If an error occurs during a function call, Python prints the name of the
function, and the name of the function that called it, and the name of
the function that called <em>that</em>, all the way back to <code class="docutils literal notranslate"><span class="pre">__main__</span></code>.</p>
<p>For example, if you try to access <code class="docutils literal notranslate"><span class="pre">cat</span></code> from within <code class="docutils literal notranslate"><span class="pre">print_twice</span></code>,
you get a <code class="docutils literal notranslate"><span class="pre">NameError</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">innermost</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;test.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">13</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__main__</span>
    <span class="n">cat_twice</span><span class="p">(</span><span class="n">line1</span><span class="p">,</span> <span class="n">line2</span><span class="p">)</span>
  <span class="n">File</span> <span class="s2">&quot;test.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">5</span><span class="p">,</span> <span class="ow">in</span> <span class="n">cat_twice</span>
    <span class="n">print_twice</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
  <span class="n">File</span> <span class="s2">&quot;test.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">9</span><span class="p">,</span> <span class="ow">in</span> <span class="n">print_twice</span>
    <span class="k">print</span> <span class="n">cat</span>
<span class="ne">NameError</span><span class="p">:</span> <span class="n">name</span> <span class="s1">&#39;cat&#39;</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">defined</span>
</pre></div>
</div>
<p>This list of functions is called a <strong>traceback</strong>. It tells you what
program file the error occurred in, and what line, and what functions
were executing at the time. It also shows the line of code that caused
the error (i.e., line 9, in the function <code class="docutils literal notranslate"><span class="pre">print_twice</span></code>).</p>
<p>The order of the functions in the traceback is the same as the order of
the frames in the stack diagram. The function that is currently running
is at the bottom. <a class="footnote-reference" href="#id3" id="id1">[1]</a></p>
</div>
<div class="section" id="boolean-functions">
<h2>5.8. Boolean functions<a class="headerlink" href="#boolean-functions" title="Permalink to this headline">¶</a></h2>
<p>Functions can return booleans, which is often convenient for hiding
complicated tests inside functions. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_divisible</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</pre></div>
</div>
<p>It is common to give boolean functions names that sound like yes/no
questions; <code class="docutils literal notranslate"><span class="pre">is_divisible</span></code> returns either <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> to
indicate whether <code class="docutils literal notranslate"><span class="pre">x</span></code> is divisible by <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p>
<p>Here is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">is_divisible</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_divisible</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The result of the <code class="docutils literal notranslate"><span class="pre">==</span></code> operator is a boolean, so we can write the
function more concisely by returning it directly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_divisible</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">%</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Boolean functions are often used in conditional statements:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">is_divisible</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">print</span> <span class="s1">&#39;x is divisible by y&#39;</span>
</pre></div>
</div>
<p>It might be tempting to write something like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">is_divisible</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">print</span> <span class="s1">&#39;x is divisible by y&#39;</span>
</pre></div>
</div>
<p>But the extra comparison is unnecessary.</p>
<blockquote>
<div><p><strong>Example</strong>:</p>
<ol class="arabic simple">
<li>Write a function <code class="docutils literal notranslate"><span class="pre">is_between(x,</span> <span class="pre">y,</span> <span class="pre">z)</span></code> that returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if
<span class="math notranslate nohighlight">\(x \le y \le z\)</span> or <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="debugging">
<h2>5.9. Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h2>
<div class="section" id="adding-print-statements">
<h3>5.9.1. Adding <code class="docutils literal notranslate"><span class="pre">print</span></code> statements<a class="headerlink" href="#adding-print-statements" title="Permalink to this headline">¶</a></h3>
<p>Breaking a large program into smaller functions creates natural
checkpoints for debugging. If a function is not working, there are three
possibilities to consider:</p>
<ul class="simple">
<li>There is something wrong with the arguments the function is getting.</li>
<li>There is something wrong with the function.</li>
<li>There is something wrong with the return value or the way it is being
used.</li>
</ul>
<p>To rule out the first possibility, you can add a <code class="docutils literal notranslate"><span class="pre">print</span></code> statement at
the beginning of the function and display the values of the parameters
(and maybe their types). Or you can write code that checks the
preconditions explicitly.</p>
<p>If the parameters look good, add a <code class="docutils literal notranslate"><span class="pre">print</span></code> statement before each
<code class="docutils literal notranslate"><span class="pre">return</span></code> statement that displays the return value. If possible, check
the result by hand. Consider calling the function with values that make
it easy to check the result.</p>
<p>If the function seems to be working, look at the function call to make
sure the return value is being used correctly (or used at all!).</p>
</div>
<div class="section" id="unit-testing-and-assert">
<h3>5.9.2. Unit testing and <code class="docutils literal notranslate"><span class="pre">assert</span></code><a class="headerlink" href="#unit-testing-and-assert" title="Permalink to this headline">¶</a></h3>
<p>After you think you've solved a problem, <em>how do you know your program
behaves as intended?</em> You've probably run it once or twice to make sure
it does <em>something</em>, and maybe you've even tested it out with a few
different inputs. But we can do better.</p>
<p>Especially when writing functions that perform a specific task, it is
common to create <strong>test cases</strong> to call the function with specific
inputs to ensure that the function works correctly and returns the
&quot;right&quot; thing. This approach to testing is called <strong>unit testing</strong>
because of the focus on testing individual functional units (i.e., the
functions!) in a program.</p>
<p>You can think of testing your program in this way as something of an
<em>experiment</em>. First, you decide on the inputs (parameters) you want to
pass to your function. The output you expect from the function is
basically a hypothesis which can easily be tested by running the
function with your chosen input: if it produces the expected output,
then your hypothesis was correct. If not, then there is probably
something wrong with the function. (There may also be something wrong
with the output you expected --- for this reason you need to be very
careful when devising tests!)</p>
<p>There is a built-in function called <code class="docutils literal notranslate"><span class="pre">assert</span></code> that can help with
developing unit tests to ensure a function works as expected. The
<code class="docutils literal notranslate"><span class="pre">assert</span></code> function takes a Boolean expression as a parameter. If the
expression evaluates to <code class="docutils literal notranslate"><span class="pre">False</span></code>, the <code class="docutils literal notranslate"><span class="pre">assert</span></code> function will cause
your program to crash. This is a good thing! The crash lets you know
that something is wrong and needs to be fixed! If the expression in the
<code class="docutils literal notranslate"><span class="pre">assert</span></code> function call evaluates to <code class="docutils literal notranslate"><span class="pre">True</span></code>, essentially nothing
happens --- the next line in the program will be executed.</p>
<p>Here's an example. The following function is supposed to take one string
as a parameter, and count up and return the number of upper- and
lower-case <code class="docutils literal notranslate"><span class="pre">'A'</span></code>s in the string. It has two bugs. Before you read
on, see if you can figure out what they are.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># function should count up all the lower- and upper-case</span>
<span class="c1"># A&#39;s in a string and return the count.</span>
<span class="k">def</span> <span class="nf">count_As</span><span class="p">(</span><span class="n">mystring</span><span class="p">):</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">mystring</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">char</span> <span class="o">==</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Let's think of four test cases for our unit test of this function:</p>
<ul class="simple">
<li>If we call <code class="docutils literal notranslate"><span class="pre">count_As</span></code> with <code class="docutils literal notranslate"><span class="pre">'xyz'</span></code> (or an empty string), it
should return 0.</li>
<li>If we call <code class="docutils literal notranslate"><span class="pre">count_As</span></code> with <code class="docutils literal notranslate"><span class="pre">'abc'</span></code>, it should return 1.</li>
<li>If we call <code class="docutils literal notranslate"><span class="pre">count_As</span></code> with <code class="docutils literal notranslate"><span class="pre">'ABC'</span></code>, it should also return 1.</li>
<li>If we call <code class="docutils literal notranslate"><span class="pre">count_As</span></code> with <code class="docutils literal notranslate"><span class="pre">'Abracadabra'</span></code>, it should return 5.</li>
</ul>
<p>We can construct calls to <code class="docutils literal notranslate"><span class="pre">assert</span></code> by including a Boolean expression
that calls the function, and compares the return value to the expected
output. In the <code class="docutils literal notranslate"><span class="pre">assert</span></code> calls, we are making assertions (duh!) about
what the output should be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">unit_tests</span><span class="p">():</span>
    <span class="c1"># three test cases using three different</span>
    <span class="c1"># strings to test whether the count_As</span>
    <span class="c1"># function works correctly</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">count_As</span><span class="p">(</span><span class="s2">&quot;xyz&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">count_As</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">count_As</span><span class="p">(</span><span class="s2">&quot;ABC&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">count_As</span><span class="p">(</span><span class="s2">&quot;Abracadabra&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">unit_tests</span><span class="p">()</span>
</pre></div>
</div>
<p>When we run this program, we'll first call <code class="docutils literal notranslate"><span class="pre">unit_tests</span></code>, then we'll
call each of the <code class="docutils literal notranslate"><span class="pre">assert</span></code> statements, in order. Because of the bugs in
<code class="docutils literal notranslate"><span class="pre">count_As</span></code>, we'll crash on the first <code class="docutils literal notranslate"><span class="pre">assert</span></code> call:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;test2.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">16</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">unit_tests</span><span class="p">()</span>
  <span class="n">File</span> <span class="s2">&quot;test2.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">11</span><span class="p">,</span> <span class="ow">in</span> <span class="n">unit_tests</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">count_As</span><span class="p">(</span><span class="s2">&quot;xyz&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="ne">AssertionError</span>
</pre></div>
</div>
<p>We see from the function stack traceback that the program died on line
11, which was the first call to <code class="docutils literal notranslate"><span class="pre">assert</span></code>. The program crashes because
the return value of calling <code class="docutils literal notranslate"><span class="pre">count_As(&quot;xyz&quot;)</span></code> is not 0 (although it
should be!) If we look carefully at the <code class="docutils literal notranslate"><span class="pre">count_As</span></code> function, we'll see
one problem: there's no <code class="docutils literal notranslate"><span class="pre">return</span></code> statement! The function currently
<em>always</em> returns <code class="docutils literal notranslate"><span class="pre">None</span></code>. Easy to fix:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">count_As</span><span class="p">(</span><span class="n">mystring</span><span class="p">):</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">mystring</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">char</span> <span class="o">==</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">count</span> <span class="c1"># added a return statement!</span>
</pre></div>
</div>
<p>When we run the program now, we hit another <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;test2.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">17</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
    <span class="n">unit_tests</span><span class="p">()</span>
  <span class="n">File</span> <span class="s2">&quot;test2.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">14</span><span class="p">,</span> <span class="ow">in</span> <span class="n">unit_tests</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">count_As</span><span class="p">(</span><span class="s2">&quot;ABC&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
<span class="ne">AssertionError</span>
</pre></div>
</div>
<p>Now, the program crashes on the <code class="docutils literal notranslate"><span class="pre">assert</span></code> on line 14. If we carefully
examine the code (and perhaps add a <code class="docutils literal notranslate"><span class="pre">print</span></code> statement or two to help
us to see what's going on in the function), we can see that we're only
counting lower case <code class="docutils literal notranslate"><span class="pre">'a'</span></code>s, not upper case. Once we fix that
problem, all the Boolean expressions in the <code class="docutils literal notranslate"><span class="pre">assert</span></code> calls will
evaluate to <code class="docutils literal notranslate"><span class="pre">True</span></code>, and the program will finish without crashing. This
will indicate that all our tests passed successfully.</p>
<p>Interestingly, an increasingly common practice within the software
industry is to specify a set of test cases <em>before</em> writing a function.
The idea is that the activity of specifying a set of test cases helps to
clarify what a function should do. Once the test cases are specified,
the function can be written. Once all the test cases successfully pass,
the function is done.</p>
<p>The hard part of testing a program is figuring out what a good set of
test cases should be. Here are some rules of thumb:</p>
<ul class="simple">
<li>Pick one or two &quot;normal&quot; inputs and expected outputs. Think of
parameters you expect to be commonly passed to the function and
ensure that the function works for those parameters.</li>
<li>Think about any &quot;corner cases&quot; --- parameters that are just outside
any &quot;normal&quot; or expected values. For example, if you usually expect
to get the integers 1-10 as parameters to a function, write a tests
for the valid bounds (1 and 10) as well as values just outside those
bounds (0 and 11).</li>
<li>Think deviously. What sorts of inputs might cause problems for a
function? For example, if a function expects a string as input, what
happens if an empty string (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>) gets passed in?</li>
</ul>
<p>You can also read more about unit testing on Wikipedia:
<a class="reference external" href="http://en.wikipedia.org/wiki/Unit_testing">http://en.wikipedia.org/wiki/Unit_testing</a>.</p>
</div>
</div>
<div class="section" id="glossary">
<h2>5.10. Glossary<a class="headerlink" href="#glossary" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>function:</dt>
<dd>A named sequence of statements that performs some useful operation.
Functions may or may not take arguments and may or may not produce a
result.</dd>
<dt>function definition:</dt>
<dd>A statement that creates a new function, specifying its name,
parameters, and the statements it executes.</dd>
<dt>function object:</dt>
<dd>A value created by a function definition. The name of the function
is a variable that refers to a function object.</dd>
<dt>function header:</dt>
<dd>The first line of a function definition.</dd>
<dt>function body:</dt>
<dd>The sequence of statements inside a function definition.</dd>
<dt>parameter:</dt>
<dd>A name used inside a function to refer to the value passed as an
argument.</dd>
<dt>function call:</dt>
<dd>A statement that executes a function. It consists of the function
name followed by an argument list.</dd>
<dt>argument:</dt>
<dd>A value provided to a function when the function is called. This
value is assigned to the corresponding parameter in the function.</dd>
<dt>local variable:</dt>
<dd>A variable defined inside a function. A local variable can only be
used inside its function.</dd>
<dt>return value:</dt>
<dd>The result of a function. If a function call is used as an
expression, the return value is the value of the expression.</dd>
<dt>flow of execution:</dt>
<dd>The order in which statements are executed during a program run.</dd>
<dt>stack diagram:</dt>
<dd>A graphical representation of a stack of functions, their variables,
and the values they refer to.</dd>
<dt>frame:</dt>
<dd>A box in a stack diagram that represents a function call. It
contains the local variables and parameters of the function.</dd>
<dt>traceback:</dt>
<dd>A list of the functions that are executing, printed when an
exception occurs.</dd>
<dt>temporary variable:</dt>
<dd>A variable used to store an intermediate value in a complex
calculation.</dd>
<dt>dead code:</dt>
<dd>Part of a program that can never be executed, often because it
appears after a <code class="docutils literal notranslate"><span class="pre">return</span></code> statement.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">None</span></code>:</dt>
<dd>A special value returned by functions that have no return statement
or a return statement without an argument.</dd>
<dt>test case:</dt>
<dd>A set of parameters (inputs) and expected outputs for a function
that can test whether the function behaves as expected.</dd>
<dt>unit testing:</dt>
<dd>The idea of testing smaller pieces of a program, like a function,
rather than testing the whole program at once.</dd>
<dt>assertion:</dt>
<dd>A propositional statement that you expect to be <code class="docutils literal notranslate"><span class="pre">True</span></code> at some
point in a program. The built-in <code class="docutils literal notranslate"><span class="pre">assert</span></code> function can be used to
test Boolean propositional statements.</dd>
</dl>
<p class="rubric">Exercises</p>
<ol class="arabic">
<li><p class="first">Fix the last bug in the <code class="docutils literal notranslate"><span class="pre">count_As</span></code> function. Can you think of
any additional test cases that should be added for this
function?</p>
</li>
<li><p class="first">Write a function named <code class="docutils literal notranslate"><span class="pre">compare_ab</span></code> that takes one string as
parameters, and counts the occurrences of <code class="docutils literal notranslate"><span class="pre">'a'</span></code>s and
<code class="docutils literal notranslate"><span class="pre">'b'</span></code>s in the string. The function should return <code class="docutils literal notranslate"><span class="pre">True</span></code> if
the number of <code class="docutils literal notranslate"><span class="pre">'a'</span></code>s and <code class="docutils literal notranslate"><span class="pre">'b'</span></code>s is the same, and
<code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise. Think of a set of test cases for this
function, and write them.</p>
</li>
<li><p class="first">Write a function named <code class="docutils literal notranslate"><span class="pre">right_justify</span></code> that takes a string
named <code class="docutils literal notranslate"><span class="pre">s</span></code> as a parameter and prints the string with enough
leading spaces so that the last letter of the string is in
column 60 of the display:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">right_justify</span><span class="p">(</span><span class="s1">&#39;allen&#39;</span><span class="p">)</span>
<span class="go">                                                   allen</span>
</pre></div>
</div>
</li>
<li><p class="first">Write a function called <code class="docutils literal notranslate"><span class="pre">is_leap</span></code> that takes a year value as a
parameter, and returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the year is a leap year or
<code class="docutils literal notranslate"><span class="pre">False</span></code> if it is not. Refer to one of the exercises from the
last chapter for the definition of a leap year.</p>
</li>
<li><p class="first">A function object is a value you can assign to a variable or
pass as an argument. For example, <code class="docutils literal notranslate"><span class="pre">do_twice</span></code> is a function
that takes a function object as an argument and calls it twice:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_twice</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="n">f</span><span class="p">()</span>
    <span class="n">f</span><span class="p">()</span>
</pre></div>
</div>
<p>Here's an example that uses <code class="docutils literal notranslate"><span class="pre">do_twice</span></code> to call a function
named <code class="docutils literal notranslate"><span class="pre">print_spam</span></code> twice:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_spam</span><span class="p">():</span>
    <span class="nb">print</span> <span class="s1">&#39;spam&#39;</span>

<span class="n">do_twice</span><span class="p">(</span><span class="n">print_spam</span><span class="p">)</span>
</pre></div>
</div>
<ol class="loweralpha simple">
<li>Type this example into a script and test it.</li>
<li>Modify <code class="docutils literal notranslate"><span class="pre">do_twice</span></code> so that it takes two arguments, a
function object and a value, and calls the function twice,
passing the value as an argument.</li>
<li>Write a more general version of <code class="docutils literal notranslate"><span class="pre">print_spam</span></code>, called
<code class="docutils literal notranslate"><span class="pre">print_twice</span></code>, that takes a string as a parameter and
prints it twice.</li>
<li>Use the modified version of <code class="docutils literal notranslate"><span class="pre">do_twice</span></code> to call
<code class="docutils literal notranslate"><span class="pre">print_twice</span></code> twice, passing <code class="docutils literal notranslate"><span class="pre">'spam'</span></code> as an argument.</li>
<li>Define a new function called <code class="docutils literal notranslate"><span class="pre">do_four</span></code> that takes a
function object and a value and calls the function four
times, passing the value as a parameter. There should be only
two statements in the body of this function, not four.</li>
</ol>
</li>
<li><p class="first">This exercise <a class="footnote-reference" href="#id4" id="id2">[2]</a> can be done using only the statements and
other features we have learned so far.</p>
<p>Write a function that draws a grid like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">+</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">+</span>
<span class="o">|</span>         <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span>         <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span>         <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span>         <span class="o">|</span>         <span class="o">|</span>
<span class="o">+</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">+</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">+</span>
<span class="o">|</span>         <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span>         <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span>         <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span>         <span class="o">|</span>         <span class="o">|</span>
<span class="o">+</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">+</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">+</span>
</pre></div>
</div>
<p>Hint: to print more than one value on a line, you can print a
comma-separated sequence:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span>
</pre></div>
</div>
<p>If the sequence ends with a comma, Python leaves the line
unfinished, so the value printed next appears on the same line.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span>
<span class="nb">print</span> <span class="s1">&#39;-&#39;</span>
</pre></div>
</div>
<p>The output of these statements is <code class="docutils literal notranslate"><span class="pre">'+</span> <span class="pre">-'</span></code>.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">print</span></code> statement all by itself ends the current line and
goes to the next line.</p>
</li>
<li><p class="first">Use the previous function to draw a similar grid with four rows
and four columns.</p>
</li>
<li><p class="first">Write a function that takes one integer named <code class="docutils literal notranslate"><span class="pre">size</span></code> as a
parameter and prints an equilateral triangle composed of
asterisks of length <code class="docutils literal notranslate"><span class="pre">size</span></code>. For example, the call
<code class="docutils literal notranslate"><span class="pre">make_triangle(4)</span></code> should result in the following triangle
printed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>   <span class="o">*</span>
  <span class="o">*</span> <span class="o">*</span>
 <span class="o">*</span> <span class="o">*</span> <span class="o">*</span>
<span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span>
</pre></div>
</div>
</li>
<li><p class="first">Draw a stack diagram for the following program. What does the
program print?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">b</span><span class="p">(</span><span class="n">z</span><span class="p">):</span>
    <span class="n">prod</span> <span class="o">=</span> <span class="n">a</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
    <span class="nb">print</span> <span class="n">z</span><span class="p">,</span> <span class="n">prod</span>
    <span class="k">return</span> <span class="n">prod</span>

<span class="k">def</span> <span class="nf">a</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>

<span class="k">def</span> <span class="nf">c</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span>
    <span class="nb">pow</span> <span class="o">=</span> <span class="n">b</span><span class="p">(</span><span class="nb">sum</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
    <span class="k">return</span> <span class="nb">pow</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
<span class="nb">print</span> <span class="n">c</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">+</span><span class="mi">3</span><span class="p">,</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Fermat’s Last Theorem says that there are no integers <span class="math notranslate nohighlight">\(a\)</span>,
<span class="math notranslate nohighlight">\(b\)</span>, and <span class="math notranslate nohighlight">\(c\)</span> such that <span class="math notranslate nohighlight">\(a^n + b^n = c^n\)</span>
for any values of <span class="math notranslate nohighlight">\(n\)</span> greater than 2.</p>
<ol class="loweralpha simple">
<li>Write a function named <code class="docutils literal notranslate"><span class="pre">check_fermat</span></code> that takes four
parameters---<code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code> and <code class="docutils literal notranslate"><span class="pre">n</span></code>---and that checks
to see if Fermat’s theorem holds. If <span class="math notranslate nohighlight">\(n\)</span> is greater
than 2 and it turns out to be true that <span class="math notranslate nohighlight">\(a^n + b^n = c^n\)</span>
the function should return <code class="docutils literal notranslate"><span class="pre">True</span></code>. Otherwise, the
function should return <code class="docutils literal notranslate"><span class="pre">False</span></code>.</li>
<li>Write a function that prompts the user to input values for
<code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code> and <code class="docutils literal notranslate"><span class="pre">n</span></code>, converts them to integers, and
uses <code class="docutils literal notranslate"><span class="pre">check_fermat</span></code> to check whether they violate Fermat’s
theorem. If the result of calling <code class="docutils literal notranslate"><span class="pre">check_fermat</span></code> is
<code class="docutils literal notranslate"><span class="pre">False</span></code>, this function should print &quot;Holy smokes, Fermat
was wrong!&quot;. Otherwise, it should print &quot;No, that doesn't
work.&quot;</li>
</ol>
</li>
<li><p class="first">If you are given three sticks, you may or may not be able to
arrange them in a triangle. For example, if one of the sticks is
12 inches long and the other two are one inch long, it is clear
that you will not be able to get the short sticks to meet in the
middle. For any three lengths, there is a simple test to see if
it is possible to form a triangle:</p>
<p>If any of the three lengths is greater than the sum of the other
two, then you cannot form a triangle. Otherwise, you can.</p>
<ol class="loweralpha simple">
<li>Write a function named <code class="docutils literal notranslate"><span class="pre">is_triangle</span></code> that takes three
integers as arguments, and that returns <code class="docutils literal notranslate"><span class="pre">True</span></code> or
<code class="docutils literal notranslate"><span class="pre">False</span></code>, depending on whether you can or cannot form a
triangle from sticks with the given lengths.</li>
<li>Write a function that prompts the user to input three stick
lengths, converts them to integers, and uses <code class="docutils literal notranslate"><span class="pre">is_triangle</span></code>
to check whether sticks with the given lengths can form a
triangle.</li>
</ol>
</li>
</ol>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Stack diagrams can either be drawn starting from the top, working
down, or from the bottom, working up. It depends which hemisphere
(northern or southern) you come from. (Just kidding. As long as
you're consistent, it doesn't matter which way you draw it.)</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>Based on an exercise in Oualline, <em>Practical C Programming, Third
Edition</em>, O'Reilly (1997)</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="programdesign.html" title="6. Program design"
             >next</a> |</li>
        <li class="right" >
          <a href="conditionals.html" title="4. Making decisions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Solving Problems with Python (version 07.2015)</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2012-2015, Joel Sommers, Ed..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.8.
    </div>
  </body>
</html>